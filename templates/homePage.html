{% extends "template.html" %}

{% macro createProblemCollectionsForm(data) %}
    <label for='collectionTitle'> Title: </label>
    {% if 'collectionTitle' in data %}
        <input class="w3-input w3-border" id={{'collectionTitle' + data['id']}} name='collectionTitle' type="text" value={{data['collectionTitle']}} required>
    {% else %}
        <input class="w3-input w3-border" id='newCollectionTitle' name="collectionTitle" type="text" required>
    {% endif %}
    <label for='description'> Description: </label>
    {% if 'description' in data %}
        <textarea id={{'description' + data['id']}} name='description'> {{data['description']}} </textarea>
    {% else %}
        <textarea id="newDescription" name="description"> </textarea>
    {% endif %}
    <label> Problem(s) </label>
    <table class="w3-table-all problemsTable">
        <thead>
            <tr class="w3-white"> 
                <th> Problem Name </th>
                <th> Problem Link </th>
                <th> Problem Format </th>
                <th> Add/Remove </th>
            </tr>
        </thead>
        {% if 'problems' in data %}
            <!-- cry.............. -->
        {% else %}
            <tbody>
                <tr id="newClonedInput0" class="clonedInput">
                    <td>
                        <input required type="text" value="" id="newProblemName-0" name="problemName-0" class="form-control" placeholder="Name">
                    </td>
                    <td>
                        <input required type="url" value="" id="newProblemUrl-0" name="problemUrl-0" class="form-control" placeholder="https://codeforces.com/">
                    </td>
                    <td>
                        <select id="newProblemFormat-0" name="problemFormat-0">
                            <option value="IOI"> IOI </option>
                            <option value="ICPC"> ICPC </option>
                        </select>
                    </td>
                    <td>
                        <button id="btnAdd_0" name="btnAdd_0" type="button" class="w3-button clone">+</button>
                        <button id="btnDel_0" name="btnDel_0" type="button" class="w3-button remove">-</button>
                    </td>
                </tr>
            </tbody>
        {% endif %}
    </table>
{% endmacro %}

{% block otherLinks %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/homePage.css') }}">
<script src="{{ url_for('static', filename='js/homePage.js') }}"></script>
{% endblock %}

{% block body %}
<h2 class="maintitle"> My Collections </h2>
<div id="collections">
    <div class="flexcontainer" id="collectionstab">
        <button class="w3-bar-item w3-button w3-light-gray w3-border" onclick='openCollectionsTab("publicCollectionsDiv");'> Public Collections </button>
        <button class="w3-bar-item w3-button w3-light-gray w3-border" onclick='openCollectionsTab("myCollectionsDiv");'> My Collections </button>
    </div>
    <div id="publicCollectionsDiv" class="w3-border collectionscontainer">
        <p> To be added </p>
    </div>
    <div id="myCollectionsDiv" class="w3-border collectionscontainer">
        <div class="cardcontainer flexcontainer">
            {% for i in range(7) %}
            <button class="w3-card-4 collectionCard">
                <div class="h3-container w3-gray card-header">
                    <h3> Sample title </h3>
                </div>
                <div class="w3-light-gray w3-border card-progress-bar">
                    <div class="w3-green w3-text-black" style="width: 20%"> 20% </div>
                </div>
                <div class="card-desc"> This is sample text. </div>
                <div class="card-created"> 
                    <p> <b> Created on: </b> 12/3/2020 </p>
                </div>
                <div class="card-shared"> 
                    <p> <b> Shared: </b> 12/3/2020 </p>
                </div>
            </button>
            {% endfor %}
            <button class="w3-card-4 collectionCard" onclick="openModal('addcollectionmodal')">
                <div class="signtextgroup">
                    <div class="w3-border addsign"> <p class="addsigntext"> + </p> </div>
                    <div class="newcollectiontext"> Click to add a new collection... </div>    
                </div>
            </button>
        </div>
    </div>
</div>
<div id="addcollectionmodal" class="w3-modal">
    <div class="w3-modal-content">
      <div class="w3-container">
        <span onclick="closeModal('addcollectionmodal');" class="w3-button w3-display-topright">&times;</span>
        <h3> Create New Collection </h3>
        <form action="" method="POST" class="collectionForm w3-container">
            {{createProblemCollectionsForm({})}}
        </form>
      </div>
    </div>
</div>
{% endblock %}